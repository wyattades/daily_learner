{{extend 'layout.html'}}

{{block head}}
<script>
  var TRAIN_URL = "{{=URL('api', 'train_model/{}'.format(session_data.id), user_signature=True)}}";
  function trainModel(e) {
    var button = $(e.target);
    $.get(TRAIN_URL, function(res) {
      console.log(res);
      button.next().text('Loading...');
    });
  }
</script>
{{end}}

<section class="section">
  <div class="container">
    <h1 class="is-size-1">{{=title}}</h1>
    {{include 'breadcrumbs.html'}}
    {{if 'session_data' in globals() and session_data:}}
    <!-- <div class="card">
      <header class="card-header">
        <p class="card-header-title">Description</p>
      </header>
      <div class="card-content">
        {{=session_data.description}}
      </div>
    </div> -->
    <pre>{{=session_data.description}}</pre>
    <br/>
    <div class="box">
      <button class="button is-primary" onclick="trainModel(event)">Train Model</button>
      <span></span>
    </div>
    {{pass}}
    <br/>
    
    {{=grid}}
  </div>
</section>

{{ if ('analytics' in globals()) and analytics:}}
<section class="section">
  <div class="container">
    <h2 class="is-size-2">Analytics</h2>
    {{=analytics}}
    <br/>
    <a class="button" href="{{=URL('default', 'session/%s/predict' % request.args(0))}}">Predict</a>
  </div>
</section>
{{pass}}
